<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>广州地铁打卡系统</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "PingFang SC", "Helvetica Neue", Arial, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            -webkit-tap-highlight-color: transparent;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 15px;
        }
        
        header {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            background: linear-gradient(135deg, #0052D4, #4364F7, #6FB1FC);
            color: white;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        
        h1 {
            font-size: 1.8rem;
            margin-bottom: 8px;
        }
        
        .subtitle {
            font-size: 1rem;
            opacity: 0.9;
        }
        
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .station-section {
            background: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        .line-selector {
            margin-bottom: 15px;
        }
        
        select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            background-color: #f9f9f9;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 16px;
        }
        
        .station-list {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 8px;
            -webkit-overflow-scrolling: touch;
        }
        
        .station-item {
            padding: 12px 10px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .station-item:last-child {
            border-bottom: none;
        }
        
        .station-item:hover {
            background-color: #f0f8ff;
        }
        
        .checkin-btn {
            background-color: #4364F7;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
            min-width: 60px;
        }
        
        .checkin-btn:hover, .checkin-btn:active {
            background-color: #0052D4;
        }
        
        .checked-in {
            color: #28a745;
            font-weight: bold;
        }
        
        .upload-section {
            margin-top: 15px;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            display: none;
        }
        
        .upload-section.active {
            display: block;
        }
        
        .upload-section h3 {
            margin-bottom: 12px;
            color: #0052D4;
            font-size: 1.1rem;
        }
        
        .upload-btn {
            background-color: #28a745;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 12px;
            font-size: 16px;
            width: 100%;
            display: block;
        }
        
        .upload-btn:hover, .upload-btn:active {
            background-color: #218838;
        }
        
        .progress-bar {
            height: 8px;
            background-color: #e9ecef;
            border-radius: 4px;
            margin-top: 12px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background-color: #007bff;
            width: 0%;
            transition: width 0.3s;
        }
        
        footer {
            text-align: center;
            padding: 15px;
            margin-top: 20px;
            color: #666;
            font-size: 0.9rem;
        }
        
        /* 移动端优化 */
        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }
            
            header {
                padding: 12px;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .subtitle {
                font-size: 0.9rem;
            }
            
            .station-section {
                padding: 12px;
            }
            
            .station-list {
                max-height: 300px;
            }
            
            .station-item {
                padding: 10px 8px;
                font-size: 0.95rem;
            }
            
            .checkin-btn {
                padding: 6px 10px;
                font-size: 0.9rem;
                min-width: 50px;
            }
        }
        
        /* 触摸优化 */
        button, .station-item {
            transition: transform 0.1s;
        }
        
        button:active, .station-item:active {
            transform: scale(0.98);
        }
        
        /* 防止iOS缩放 */
        input, select, textarea {
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>广州地铁打卡系统</h1>
            <p class="subtitle">记录您的地铁旅程，留下美好回忆</p>
        </header>
        
        <div class="main-content">
            <div class="station-section">
                <div class="line-selector">
                    <select id="line-select">
                        <option value="line1">1号线 (广州东站—西塱)</option>
                        <option value="line2">2号线 (嘉禾望岗—广州南站)</option>
                        <option value="line3">3号线 (天河客运站/机场北—海傍)</option>
                        <option value="line4">4号线 (黄村—南沙客运港)</option>
                        <option value="line5">5号线 (滘口—黄埔新港)</option>
                        <option value="line6">6号线 (浔峰岗—香雪)</option>
                        <option value="line7">7号线 (美的大道—燕山)</option>
                        <option value="line8">8号线 (滘心—万胜围)</option>
                        <option value="line9">9号线 (高增—飞鹅岭)</option>
                        <option value="line10">10号线 (西塱—杨箕东)</option>
                    </select>
                </div>
                
                <div class="station-list" id="station-list">
                    <!-- 站点列表将通过JavaScript动态生成 -->
                </div>
                
                <div class="upload-section" id="upload-section">
                    <h3>上传打卡图片 - <span id="current-station"></span></h3>
                    <input type="file" id="image-upload" accept="image/*">
                    <button class="upload-btn" id="upload-btn">上传并打卡</button>
                    <div class="progress-bar">
                        <div class="progress" id="upload-progress"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>© 2025 huangzr自制 | 广州地铁打卡系统 | 记录您的地铁旅程</p>
        </footer>
    </div>

    <script>
        // 地铁线路数据
        const metroLines = {
            line1: {
                name: "1号线",
                stations: ["广州东站", "体育中心", "体育西路", "杨箕", "东山口", "烈士陵园", "农讲所", "公园前", "西门口", "陈家祠", "长寿路", "黄沙", "芳村", "花地湾", "坑口", "西塱"]
            },
            line2: {
                name: "2号线",
                stations: ["嘉禾望岗", "白云文化广场", "白云公园", "飞翔公园", "三元里", "广州火车站", "越秀公园", "纪念堂", "公园前", "海珠广场", "市二宫", "江南西", "昌岗", "江泰路", "东晓南", "南洲", "洛溪", "南浦", "会江", "石壁", "广州南站"]
            },
            line3: {
                name: "3号线",
                stations: ["天河客运站", "五山", "华师", "岗顶", "石牌桥", "体育西路", "珠江新城", "广州塔", "客村", "大塘", "沥滘", "厦滘", "大石", "汉溪长隆", "市桥", "番禺广场", "海傍"]
            },
            line4: {
                name: "4号线",
                stations: ["黄村", "车陂", "车陂南", "万胜围", "官洲", "大学城北", "大学城南", "新造", "石碁", "海傍", "低涌", "东涌", "庆盛", "黄阁汽车城", "黄阁", "蕉门", "金洲", "飞沙角", "广隆", "大涌", "塘坑", "南横", "南沙客运港"]
            },
            line5: {
                name: "5号线",
                stations: ["滘口", "坦尾", "中山八", "西场", "西村", "广州火车站", "小北", "淘金", "区庄", "动物园", "杨箕", "五羊邨", "珠江新城", "猎德", "潭村", "员村", "科韵路", "车陂南", "东圃", "三溪", "鱼珠", "大沙地", "大沙东", "文冲", "双沙", "庙头", "夏园", "保盈大道", "夏港", "黄埔新港"]
            },
            line6: {
                name: "6号线",
                stations: ["浔峰岗", "横沙", "沙贝", "河沙", "坦尾", "如意坊", "黄沙", "文化公园", "一德路", "海珠广场", "北京路", "团一大广场", "东湖", "东山口", "区庄", "黄花岗", "沙河顶", "天平架", "燕塘", "天河客运站", "长湴", "植物园", "龙洞", "柯木塱", "高塘石", "黄陂", "金峰", "暹岗", "苏元", "萝岗", "香雪"]
            },
            line7: {
                name: "7号线",
                stations: ["美的大道", "北滘公园", "美的", "南涌", "锦龙", "陈村", "陈村北", "大洲", "广州南站", "石壁", "谢村", "钟村", "汉溪长隆", "南村万博", "员岗", "板桥", "大学城南", "深井", "长洲", "裕丰围", "大沙东", "姬堂", "加庄", "科丰路", "萝岗", "水西", "燕山"]
            },
            line8: {
                name: "8号线",
                stations: ["万胜围", "琶洲", "新港东", "磨碟沙", "赤岗", "客村", "鹭江", "中大", "晓港", "昌岗", "宝岗大道", "沙园", "凤凰新村", "同福西", "文化公园", "华林寺", "陈家祠", "彩虹桥", "西村", "鹅掌坦", "同德", "上步", "聚龙", "石潭", "小坪", "石井", "亭岗", "滘心"]
            },
            line9: {
                name: "9号线",
                stations: ["飞鹅岭", "花都汽车城", "广州北站", "花城路", "花果山公园", "花都广场", "马鞍山公园", "莲塘", "清布", "清塘", "高增"]
            },
            line10: {
                name: "10号线",
                stations: ["西塱", "花围", "东沙", "大干围", "工业大道南", "东晓南", "五凤", "中大南门", "滨江东路", "东湖", "五羊邨", "杨箕东"]
            }
        };

        // 当前选中的线路和站点
        let currentLine = 'line1';
        let currentStation = null;

        // 初始化页面
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化线路选择
            const lineSelect = document.getElementById('line-select');
            lineSelect.addEventListener('change', function() {
                currentLine = this.value;
                loadStations(currentLine);
            });

            // 初始化上传按钮
            const uploadBtn = document.getElementById('upload-btn');
            uploadBtn.addEventListener('click', handleUpload);

            // 加载默认线路的站点
            loadStations(currentLine);
        });

        // 加载站点列表
        function loadStations(line) {
            const stationList = document.getElementById('station-list');
            stationList.innerHTML = '';
            
            const stations = metroLines[line].stations;
            
            stations.forEach(station => {
                const stationItem = document.createElement('div');
                stationItem.className = 'station-item';
                
                // 检查是否已打卡
                const isChecked = localStorage.getItem(`${line}-${station}`);
                
                stationItem.innerHTML = `
                    <span class="${isChecked ? 'checked-in' : ''}">${station}</span>
                    <button class="checkin-btn" data-station="${station}">打卡</button>
                `;
                
                stationList.appendChild(stationItem);
            });
            
            // 添加打卡按钮事件监听
            document.querySelectorAll('.checkin-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    currentStation = this.getAttribute('data-station');
                    showUploadSection(currentStation);
                });
            });
        }

        // 显示上传区域
        function showUploadSection(station) {
            const uploadSection = document.getElementById('upload-section');
            const currentStationSpan = document.getElementById('current-station');
            
            currentStationSpan.textContent = station;
            uploadSection.classList.add('active');
            
            // 滚动到上传区域
            uploadSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // 处理上传
        function handleUpload() {
            const fileInput = document.getElementById('image-upload');
            const progressBar = document.getElementById('upload-progress');
            
            if (!fileInput.files.length) {
                alert('请选择要上传的图片');
                return;
            }
            
            // 模拟上传过程
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                progressBar.style.width = `${progress}%`;
                
                if (progress >= 100) {
                    clearInterval(interval);
                    
                    // 保存打卡记录
                    localStorage.setItem(`${currentLine}-${currentStation}`, 'true');
                    
                    // 更新UI
                    loadStations(currentLine);
                    
                    // 隐藏上传区域
                    document.getElementById('upload-section').classList.remove('active');
                    fileInput.value = '';
                    progressBar.style.width = '0%';
                    
                    alert('打卡成功！');
                }
            }, 100);
        }
    </script>
</body>
</html>
